<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@cardinal/token-manager - v0.1.6</title><meta name="description" content="Documentation for @cardinal/token-manager - v0.1.6"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@cardinal/token-manager - v0.1.6</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@cardinal/token-manager - v0.1.6</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#cardinal" id="cardinal" style="color: inherit; text-decoration: none;">
  <h1>Cardinal</h1>
</a>
<p><a href="https://github.com/cardinal-labs/cardinal-token-manager/blob/master/LICENSE"><img src="https://img.shields.io/badge/license-AGPL%203.0-blue" alt="License"></a>
<a href="https://github.com/cardinal-labs/cardinal-token-manager/actions/workflows/release.yml"><img src="https://github.com/cardinal-labs/cardinal-token-manager/actions/workflows/release.yml/badge.svg?branch=v0.0.27" alt="Release"></a></p>
<p align="center">
    <img src="./images/banner.png" />
</p>

<p align="center">
    An open protocol for issuing managed tokens on Solana.
</p>


<a href="#background" id="background" style="color: inherit; text-decoration: none;">
  <h2>Background</h2>
</a>
<p>Cardinal is a composable protocol for issuing conditional NFTs that are managed by the protocol. Using the invalidators and approvers in various ways allows for building rentals, expiring in-game items, subscriptions, permits, tickets, passes and more.</p>
<p>Carinal protocol provides a token-manager implementation as well as basic plugins for paid claim, permissioned transfer, and time invalidation. These plugins can be extended to support various use cases or similar ones built with entirely new logic for token handling the token invalidation.</p>

<a href="#packages" id="packages" style="color: inherit; text-decoration: none;">
  <h2>Packages</h2>
</a>
<table>
<thead>
<tr>
<th align="left">Package</th>
<th align="left">Description</th>
<th align="left">Version</th>
<th align="left">Docs</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>cardinal-token-manager</code></td>
<td align="left">Manages conditionally owned tokens</td>
<td align="left"><a href="https://crates.io/crates/cardinal-token-manager"><img src="https://img.shields.io/crates/v/cardinal-token-manager" alt="Crates.io"></a></td>
<td align="left"><a href="https://docs.rs/cardinal-token-manager"><img src="https://docs.rs/cardinal-token-manager/badge.svg" alt="Docs.rs"></a></td>
</tr>
<tr>
<td align="left"><code>cardinal-paid-claim-approver</code></td>
<td align="left">Approves users to claim tokens from a token-manager</td>
<td align="left"><a href="https://crates.io/crates/cardinal-paid-claim-approver"><img src="https://img.shields.io/crates/v/cardinal-paid-claim-approver" alt="Crates.io"></a></td>
<td align="left"><a href="https://docs.rs/cardinal-paid-claim-approver"><img src="https://docs.rs/cardinal-paid-claim-approver/badge.svg" alt="Docs.rs"></a></td>
</tr>
<tr>
<td align="left"><code>cardinal-time-invalidator</code></td>
<td align="left">Invalidator for time-based token-managers</td>
<td align="left"><a href="https://crates.io/crates/cardinal-time-invalidator"><img src="https://img.shields.io/crates/v/cardinal-time-invalidator" alt="Crates.io"></a></td>
<td align="left"><a href="https://docs.rs/cardinal-time-invalidator"><img src="https://docs.rs/cardinal-time-invalidator/badge.svg" alt="Docs.rs"></a></td>
</tr>
<tr>
<td align="left"><code>cardinal-use-invalidator</code></td>
<td align="left">Invalidator for use-based token-managers</td>
<td align="left"><a href="https://crates.io/crates/cardinal-use-invalidator"><img src="https://img.shields.io/crates/v/cardinal-use-invalidator" alt="Crates.io"></a></td>
<td align="left"><a href="https://docs.rs/cardinal-use-invalidator"><img src="https://docs.rs/cardinal-use-invalidator/badge.svg" alt="Docs.rs"></a></td>
</tr>
<tr>
<td align="left"><code>@cardinal/token-manager</code></td>
<td align="left">TypeScript SDK for token-manager</td>
<td align="left"><a href="https://www.npmjs.com/package/@cardinal/token-manager"><img src="https://img.shields.io/npm/v/@cardinal/token-manager.svg" alt="npm"></a></td>
<td align="left"><a href="https://cardinal-labs.github.io/cardinal-token-manager/"><img src="https://img.shields.io/badge/docs-typedoc-blue" alt="Docs"></a></td>
</tr>
</tbody></table>

<a href="#addresses" id="addresses" style="color: inherit; text-decoration: none;">
  <h2>Addresses</h2>
</a>
<p>Program addresses are the same on devnet, testnet, and mainnet-beta.</p>
<ul>
<li>TokenManager: <a href="https://explorer.solana.com/address/mgr99QFMYByTqGPWmNqunV7vBLmWWXdSrHUfV8Jf3JM"><code>mgr99QFMYByTqGPWmNqunV7vBLmWWXdSrHUfV8Jf3JM</code></a></li>
<li>PaidClaimApprover: <a href="https://explorer.solana.com/address/pcaBwhJ1YHp7UDA7HASpQsRUmUNwzgYaLQto2kSj1fR"><code>pcaBwhJ1YHp7UDA7HASpQsRUmUNwzgYaLQto2kSj1fR</code></a></li>
<li>TimeInvalidator: <a href="https://explorer.solana.com/address/tmeEDp1RgoDtZFtx6qod3HkbQmv9LMe36uqKVvsLTDE"><code>tmeEDp1RgoDtZFtx6qod3HkbQmv9LMe36uqKVvsLTDE</code></a></li>
<li>UseInvalidator: <a href="https://explorer.solana.com/address/useZ65tbyvWpdYCLDJaegGK34Lnsi8S3jZdwx8122qp"><code>useZ65tbyvWpdYCLDJaegGK34Lnsi8S3jZdwx8122qp</code></a></li>
</ul>

<a href="#plugins" id="plugins" style="color: inherit; text-decoration: none;">
  <h2>Plugins</h2>
</a>
<p>Cardinal token-manager is made to be composable. It allows for plugins for</p>
<ol>
<li>Claim approvers</li>
<li>Transfer authorities</li>
<li>Invalidators</li>
</ol>
<p>When instantiating a token-manager, the issuer can set a claim approver, transfer authority and invalidators that can control the claim, transfer and invalidate mechanisms. These are all plugins that can be pointed to any program-derived account or user owned account. Out of the box, there are basic plugins to power use and time rentals and subscriptions.</p>

<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
  <h2>Documentation</h2>
</a>
<p>Documentation is a work in progress. For now, one should read <a href="/tests/issueUnissue.spec.ts">the tests</a>.</p>
<p>We soon plan on releasing a React library to make it easy to integrate Cardinal ui components with your frontend.</p>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h2>Installation</h2>
</a>
<ul>
<li>Javascript</li>
</ul>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">i</span><span class="hl-1"> @</span><span class="hl-0">cardinal</span><span class="hl-1">/</span><span class="hl-0">token</span><span class="hl-1">-</span><span class="hl-0">manager</span><br/><br/><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">Connection</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&quot;@solana/web3.js&quot;</span><span class="hl-1">;</span>
</code></pre>
<p><em>Check the SDK for other types and utility functions.</em></p>

<a href="#create-stream" id="create-stream" style="color: inherit; text-decoration: none;">
  <h4>Create stream</h4>
</a>
<pre><code class="language-javascript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">issueTokenParameters</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">paymentAmount:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">BN</span><span class="hl-1">(</span><span class="hl-7">10</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-0">paymentMint:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">PublicKey</span><span class="hl-1">(</span><span class="hl-3">&#39;...&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-0">expiration:</span><span class="hl-1"> (</span><span class="hl-8">Date</span><span class="hl-1">.</span><span class="hl-6">now</span><span class="hl-1">() / </span><span class="hl-7">1000</span><span class="hl-1">) + </span><span class="hl-7">86400</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">usages:</span><span class="hl-1"> </span><span class="hl-7">1</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">mint:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">PublicKey</span><span class="hl-1">(</span><span class="hl-3">&#39;...&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-0">amount:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">BN</span><span class="hl-1">(</span><span class="hl-7">1</span><span class="hl-1">), </span><span class="hl-9">// default 1</span><br/><span class="hl-1">  </span><span class="hl-0">issuerTokenAccountId:</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">PublicKey</span><span class="hl-1">(</span><span class="hl-3">&#39;3c5mtZ9PpGu3hj1W1a13Hie1CAXKnRyj2xruNxwWcWTz&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-0">visibility:</span><span class="hl-1"> </span><span class="hl-3">&quot;public&quot;</span><span class="hl-1"> </span><span class="hl-9">// default public</span><br/><span class="hl-1">  </span><span class="hl-0">kind</span><span class="hl-1">: </span><span class="hl-0">TokenManagerKind</span><span class="hl-1">.</span><span class="hl-0">Edition</span><span class="hl-1">, </span><span class="hl-9">// used for metaplex master / editions,</span><br/><span class="hl-1">  </span><span class="hl-0">invalidationType:</span><span class="hl-1"> </span><span class="hl-0">InvalidationType</span><span class="hl-1">.</span><span class="hl-0">Return</span><span class="hl-1"> </span><span class="hl-9">// indicates this token will be returned when invalidated</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-2">try</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> [</span><span class="hl-5">transaction</span><span class="hl-1">] = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-6">issueToken</span><span class="hl-1">(</span><span class="hl-0">issueTokenParameters</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">transaction</span><span class="hl-1">.</span><span class="hl-0">feePayer</span><span class="hl-1"> = </span><span class="hl-0">wallet</span><span class="hl-1">.</span><span class="hl-0">publicKey</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">transaction</span><span class="hl-1">.</span><span class="hl-6">recentBlockhash</span><span class="hl-1"> = (</span><br/><span class="hl-1">    </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">connection</span><span class="hl-1">.</span><span class="hl-6">getRecentBlockhash</span><span class="hl-1">(</span><span class="hl-3">&quot;max&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">    ).</span><span class="hl-0">blockhash</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">transaction</span><span class="hl-1">.</span><span class="hl-6">sign</span><span class="hl-1">(</span><span class="hl-0">wallet</span><span class="hl-1">, </span><span class="hl-0">masterEditionMint</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-6">sendAndConfirmRawTransaction</span><span class="hl-1">(</span><span class="hl-0">connection</span><span class="hl-1">, </span><span class="hl-0">transaction</span><span class="hl-1">.</span><span class="hl-6">serialize</span><span class="hl-1">(), {</span><br/><span class="hl-1">        </span><span class="hl-0">commitment:</span><span class="hl-1"> </span><span class="hl-3">&quot;confirmed&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">} </span><span class="hl-2">catch</span><span class="hl-1"> (</span><span class="hl-0">exception</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-9">// handle exception</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h2>License</h2>
</a>
<p>Cardinal Protocol is licensed under the GNU Affero General Public License v3.0.</p>
<p>In short, this means that any changes to this code must be made open source and available under the AGPL-v3.0 license, even if only used privately.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="modules/claimLinks.html">claim<wbr/>Links</a></li><li class=" tsd-kind-namespace"><a href="modules/programs.html">programs</a></li><li class=" tsd-kind-namespace"><a href="modules/rentals.html">rentals</a></li><li class=" tsd-kind-namespace"><a href="modules/wrappedSol.html">wrapped<wbr/>Sol</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-type-alias tsd-has-type-parameter"><a href="modules.html#AccountData" class="tsd-kind-icon">Account<wbr/>Data</a></li><li class="tsd-kind-type-alias"><a href="modules.html#IssueParameters" class="tsd-kind-icon">Issue<wbr/>Parameters</a></li><li class="tsd-kind-function"><a href="modules.html#claimToken" class="tsd-kind-icon">claim<wbr/>Token</a></li><li class="tsd-kind-function"><a href="modules.html#findAta" class="tsd-kind-icon">find<wbr/>Ata</a></li><li class="tsd-kind-function"><a href="modules.html#invalidate" class="tsd-kind-icon">invalidate</a></li><li class="tsd-kind-function"><a href="modules.html#issueToken" class="tsd-kind-icon">issue<wbr/>Token</a></li><li class="tsd-kind-function tsd-has-type-parameter"><a href="modules.html#tryGetAccount" class="tsd-kind-icon">try<wbr/>Get<wbr/>Account</a></li><li class="tsd-kind-function"><a href="modules.html#unissueToken" class="tsd-kind-icon">unissue<wbr/>Token</a></li><li class="tsd-kind-function"><a href="modules.html#useTransaction" class="tsd-kind-icon">use<wbr/>Transaction</a></li><li class="tsd-kind-function"><a href="modules.html#withClaimToken" class="tsd-kind-icon">with<wbr/>Claim<wbr/>Token</a></li><li class="tsd-kind-function"><a href="modules.html#withFindOrInitAssociatedTokenAccount" class="tsd-kind-icon">with<wbr/>Find<wbr/>Or<wbr/>Init<wbr/>Associated<wbr/>Token<wbr/>Account</a></li><li class="tsd-kind-function"><a href="modules.html#withInvalidate" class="tsd-kind-icon">with<wbr/>Invalidate</a></li><li class="tsd-kind-function"><a href="modules.html#withIssueToken" class="tsd-kind-icon">with<wbr/>Issue<wbr/>Token</a></li><li class="tsd-kind-function"><a href="modules.html#withUnissueToken" class="tsd-kind-icon">with<wbr/>Unissue<wbr/>Token</a></li><li class="tsd-kind-function"><a href="modules.html#withUse" class="tsd-kind-icon">with<wbr/>Use</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>